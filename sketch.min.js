function DrawTable(){for(var t="<tr><td class='td'>",e=1;width>e;e++)t+="</td><td class='td'>";t+="</td></tr>",_temp=t;for(var e=1;height>e;e++)t+=_temp;return IdList=new Array(width*height),t}function IsEndVertical(t){for(up=1,down=0,_temp=t;_temp>width&&IdList[_temp-width]==IdList[_temp];)up+=1,_temp-=width;for(_temp=t;width*height-1>_temp&&IdList[_temp+width]==IdList[_temp];)down+=1,_temp+=width;return up+down>=sub?!0:!1}function IsEndHorizontal(t){for(up=1,down=0,_temp=t;_temp>10*parseInt(t/10)&&IdList[_temp-1]==IdList[_temp];)up+=1,_temp-=1;for(_temp=t;_temp<10*(parseInt(t/10)+1)&&IdList[_temp+1]==IdList[_temp];)down+=1,_temp+=1;return up+down>=sub?!0:!1}function IsEndRightUp(t){for(up=1,down=0,_temp=t;t%width!=width&&IdList[_temp]==IdList[_temp-width+1];)up+=1,_temp-=width-1;for(_temp=t;t%width!=width&&IdList[_temp]==IdList[_temp+width-1];)up+=1,_temp+=width-1;return up+down>=sub?!0:!1}function IsEndRightDown(t){for(up=1,down=0,_temp=t;t%width!=width&&IdList[_temp]==IdList[_temp-width-1];)up+=1,_temp-=width+1;for(_temp=t;t%width!=width&&IdList[_temp]==IdList[_temp+width+1];)up+=1,_temp+=width+1;return up+down>=sub?!0:!1}function IsGameOver(t){return IsEndVertical(t)||IsEndHorizontal(t)||IsEndRightUp(t)||IsEndRightDown(t)?!0:!1}function GameOver(){gameOver=!0,count+=1;var t=1==now?oName:xName;$(".winner").css("display","flex"),$(".winnerText").text("The winner is: "+t),$(".table").css("display","none"),$(".history-append").append("<tr><td class='center'>"+count+"</td><td class='center'>"+t+"</td></tr>")}function Update(){$(".canvas").width($(".table").width()),$(".canvas").height($(".table").height()),$(".canvas").css("top",$(".table").css("top")),$(".showName").text(1==now?xName:oName),$(".col-3").css({display:$(window).width()<=980?"none":"block"}),$(".td").css("width",500/(width>=height?width:height)+"px"),$(".td").css("height",500/(width>=height?width:height)+"px"),$(".showImg").attr("src",1==now?xSource:oSource),$(".showName").text(1==now?xName:oName)}function Reset(){$(".table").css("display","block"),$(".winner").css("display","none"),$(".pause").css("display","none"),$(".table").html(DrawTable());for(var t=0;t<IdList.length;t++)IdList[t]=null;gameOver=!1,playing=!0,timer=setTimer}var sub=5,now=1,IdList,up,down,width=10,height=10,_temp,setTimer=2e4,timer=setTimer,xName="X Player",oName="O Player",gameOver=!1,playing=!1,count=0,xSource="theX.png",oSource="theY.png";$(document).ready(function(){$(".table").html(DrawTable()),$("table").on("click",".td",function(){Update();var t=$("td").index(this);timer=setTimer,1==now&&"checked"!=$(this).attr("id")&&($(this).css("background-image","url("+xSource+")"),now=0,$(this).attr("id","checked"),IdList[t]="X"),0==now&&"checked"!=$(this).attr("id")&&($(this).css("background-image","url("+oSource+")"),now=1,$(this).attr("id","checked"),IdList[t]="O"),IsGameOver(t)&&GameOver()}),$(".btn-reset").click(function(){Reset()}),$(".btn-pause").click(function(){$(".pause").css("display","flex"),$(".table").css("display","none"),playing=!1}),$(".btn-continue").click(function(){$(".pause").css("display","none"),$(".table").css("display","block"),playing=!0}),$(".btn-new-start").click(function(){$(".container").css("display","flex"),$(".start").css("display","none"),playing=!0}),$(".btn-setting").click(function(){$(".container").css("display","none"),$(".start").css("display","none"),$(".settings").css("display","flex")}),$(".btn-out-setting").click(function(){$(".settings").css("display","none")}),$("#step").change(function(){$(".show-step").text($(this).val())}),$("#set-width").change(function(){$(".show-width").text($(this).val())}),$("#set-height").change(function(){$(".show-height").text($(this).val())}),$("#set-timer").change(function(){$(".show-timer").text($(this).val())}),$("#set-xname").change(function(){$(".show-xname").text($(this).val())}),$("#set-oname").change(function(){$(".show-oname").text($(this).val())}),$(".out-setting").click(function(){$("#set-width").val(width),$("#set-height").val(height),$("#step").val(sub),$("#set-xname").val(xName),$("#set-oname").val(oName),$("#set-timer").val(setTimer/1e3),$(".show-width").text(width),$(".show-height").text(height),$(".show-timer").text(setTimer/1e3),$(".show-xname").text(xName),$(".show-oname").text(oName),$(".show-step").text(sub),$(".settings").css("display","none"),$(".start").css("display","flex")}),$(".new-game-fromstart").click(function(){width=$("#set-width").val(),height=$("#set-height").val(),sub=$("#step").val(),xName=$("#set-xname").val(),oName=$("#set-oname").val(),setTimer=1e3*$("#set-timer").val(),$(".settings").css("display","none"),$(".container").css("display","flex"),Reset()}),setInterval(function(){Update(),0>=timer&&(timer=setTimer,now=1==now?0:1),$(".showTimer").text("Time left: "+timer/1e3+(timer%1e3==0?".0":"")),timer-=gameOver||!playing?0:100},100)});